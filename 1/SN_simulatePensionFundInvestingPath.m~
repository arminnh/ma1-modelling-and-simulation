function [ path, yield ] = SN_simulatePensionFundInvestingPath(budget, pricePath, quartals)
% Simulate the path of a pension fund
    
    investedCapital = SN_investedCapital(budget, quartals);
    
    runningCosts = 0.0125; % 1.25%
    initialFee = 0.03;     % 3% "Om fractionele eenheden van het BNP-fonds aan te kopen"
        
    path = budget * (1-initialFee);
     
    for q = 2:quartals
        % calculate net budget to buy shares
        budgetNet = budget * (1-initialFee);
        
        % yearly tax return of 30% of previous year's investment, max 282 euro. 
        % every 1st of april. use this money to invest in more shares
        if quartals > 5 
            
        end
        
        % buy new shares
        path(q) = path(q-1) + budgetNet / pricePath(q);
        
        % budget increases with 2% each year
        if mod(q, 4) == 0
            budget = budget * 1.02;
        end
    end

    path = path .* pricePath; % convert shares into the money they are worth
    yield = (path(end) - investedCapital) / investedCapital;

end

1
2
3
4
5
6*
7
8
9
10*
11
12
13
14*
15
16
17
18*
19
20
21
22*